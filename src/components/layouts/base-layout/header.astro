---
import { Icon } from "astro-icon/components";
import Button from "./components/button.astro";

interface MenuItem {
	label: string;
	url: string;

	type?: "primary" | "secondary";
}

interface Props {
	menu: MenuItem[];
}

const { menu } = Astro.props;
---

<style>
	.s-hamburger-menu__icon {
		body:has(&:checked) {
			overflow: hidden;
		}
		cursor: pointer;
		appearance: none;
		margin: 0;
		padding: 0;
		@media (max-width: 1023px) {
			& ~ .s-hamburger-menu__items {
				transition: all 300ms;
				opacity: 0;
				pointer-events: none;
				visibility: hidden;
				transform: translateY(10%);
			}
			&:checked ~ .s-hamburger-menu__items {
				opacity: 1;
				pointer-events: auto;
				visibility: visible;
				transform: translateY(0%);
			}
		}
		transition: all 0.25s;
		position: relative;
		display: inline-block;
		width: 3em;
		height: 3em;
		background-image: linear-gradient(
			to right,
			transparent 0.1em,
			theme(colors.primary.950) 0.1em,
			theme(colors.primary.950),
			theme(colors.primary.950) calc(100% - 0.1em),
			transparent calc(100% - 0.1em)
		);
		background-repeat: no-repeat;
		background-size: 3em 0.2em;
		background-position: center;

		&::after,
		&::before {
			transition: all 0.25s;
			content: "";
			position: absolute;
			width: 3em;
			height: 0.2em;
			background-color: theme(colors.primary.950);
			transform: translateY(-50%);
			border-radius: 0.1em;
		}
		&::before {
			top: 0.75em;
		}
		&::after {
			top: 2.25em;
		}
		@media (pointer: fine) {
			&:hover {
				&::before {
					top: 0.5em;
				}
				&::after {
					top: 2.5em;
				}
			}
		}
		&:checked {
			background-position: -3em center;
			&::before {
				top: 1.5em;
				transform: translateY(-50%) rotateZ(45deg);
			}
			&::after {
				top: 1.5em;
				transform: translateY(-50%) rotateZ(-45deg);
			}
		}
	}
</style>

<header
	class="bg-white h-12 md:h-20 border-b-primary-950 border-b border-opacity-20 px-6 md:px-12 lg:px-24 sticky top-0 z-10"
>
	<section
		class="max-w-screen-xl flex items-center justify-between h-full w-full mx-auto"
	>
		<Icon name="logo-full" class="h-8 md:h-10 w-max" />
		<div class="flex items-center">
			<input
				type="checkbox"
				id="s-hamburger-menu__icon"
				class="s-hamburger-menu__icon text-xs md:text-sm lg:!hidden block"
			/>
			<div
				class="s-hamburger-menu__items fixed lg:static lg:flex inset-0 top-12 md:top-20 bg-primary-200 bg-opacity-90 lg:bg-transparent backdrop-blur lg:backdrop-blur-none z-10 flex flex-col lg:flex-row p-12 lg:p-0 gap-6"
			>
				{
					menu.map((item) => (
						<Button
							type={item.type}
							href={item.url}
						>
							{item.label}
						</Button>
					))
				}
			</div>
		</div>
	</section>
</header>
